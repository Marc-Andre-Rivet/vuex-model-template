{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5abce15ca531fa2de397","webpack:///./src/enumerations/type.js","webpack:///external \"lodash\"","webpack:///./src/ModelObject/index.js","webpack:///./src/ProxyWrapper/index.js","webpack:///./src/index.js","webpack:///./src/ModelObject/module.js","webpack:///./src/ModelObject/validate.js","webpack:///./src/vuex/mixin.js","webpack:///external \"vue\"","webpack:///external \"vuex\""],"names":["getProxy","Any","Symbol","Array","Boolean","Complex","ModelObject","Number","Object","String","apply","data","template","expectedProperties","intersection","keys","defaults","defaultProperties","difference","each","property","type","cloneDeep","defaultValue","console","log","undefined","properties","getActions","prefixes","visitUserActions","actions","getOwnPropertyNames","propertyActions","forOwn","actionName","$moduleId","join","length","key","args","push","extend","splice","visitCustomActions","customModule","value","ids","wm","WeakMap","getId","constructor","name","store","module","id","set","$store","proxy","get","ProxyWrapper","target","forEach","isArray","Proxy","t","indexOf","Error","TYPE","registerModule","state","visitActions","mutations","visitMutations","commit","sideEffects","sideEffectName","sideEffect","action","chain","reduce","prop","array","index","stack","validate","throwError","toString","validateProperty","isUndefined","items","isBoolean","isObject","isNumber","isString","unexpectedProperties","expectedProperty","mutate","act","call","pop"],"mappings":"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","file":"vuex-model-template.dev.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"vue\"), require(\"vuex\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"vue\", \"vuex\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"lodash\"), require(\"vue\"), require(\"vuex\")) : factory(root[\"lodash\"], root[\"vue\"], root[\"vuex\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5abce15ca531fa2de397","\r\nimport Wrapper from 'ProxyWrapper';\r\nexport default Wrapper.getProxy({\r\n    Any: Symbol('Any'),\r\n    Array: Symbol('Array'),\r\n    Boolean: Symbol('Boolean'),\r\n    Complex: Symbol('Complex'),\r\n    ModelObject: Symbol('ModelObject'),\r\n    Number: Symbol('Number'),\r\n    Object: Symbol('Object'),\r\n    String: Symbol('String'),\r\n    Symbol: Symbol('Symbol')\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/enumerations/type.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 1\n// module chunks = 0","\r\nimport _ from 'lodash';\r\nimport { act } from 'vuex/mixin';\r\nimport moduleFn from 'ModelObject/module';\r\nimport validate from 'ModelObject/validate';\r\nimport Wrapper from 'ProxyWrapper';\r\nimport TYPE from 'enumerations/type';\r\nfunction apply(data, template) {\r\n    let expectedProperties = _.intersection(\r\n        _.keys(data),\r\n        _.keys(template)\r\n    );\r\n    _.defaults(this, data);\r\n    let defaultProperties = _.difference(\r\n        _.keys(template),\r\n        _.keys(data)\r\n    );\r\n    _.each(defaultProperties, property => {\r\n        if (template[property].type !== TYPE.Complex) {\r\n            this[property] = _.cloneDeep(template[property].defaultValue);\r\n        } else {\r\n            console.log('apply default value to complex type', property);\r\n            this[property] = {};\r\n            this[property]::apply(data && data[property] ? data[property] : undefined, template[property].properties);\r\n        }\r\n    });\r\n}\r\nfunction getActions(type) {\r\n    if (type === TYPE.Array) {\r\n        return ['set', 'add', 'remove', 'clear'];\r\n    } else {\r\n        return ['set'];\r\n    }\r\n}\r\nlet prefixes = [];\r\nfunction visitUserActions(template) {\r\n    let actions = {};\r\n    let properties = Object.getOwnPropertyNames(template);\r\n    _.each(properties, property => {\r\n        actions[property] = {};\r\n        let propertyActions = template[property].actions;\r\n        _.forOwn(getActions(template[property].type), key => {\r\n            let actionName = `[${this.$moduleId}]/${prefixes.join('/')}${prefixes.length ? '/' : ''}${property}:${key}`;\r\n            actions[property][key] = (...args) => {\r\n                console.log('do', actionName, ...args);\r\n                this::act(actionName, ...args);\r\n            };\r\n        });\r\n        if (template[property].properties) {\r\n            prefixes.push(property);\r\n            actions[property] = _.extend(actions[property], this::visitUserActions(template[property].properties));\r\n            prefixes.splice(-1);\r\n        }\r\n    });\r\n    return actions;\r\n}\r\nfunction visitCustomActions(customModule) {\r\n    let actions = {};\r\n    _.forOwn(customModule, (value, key) => {\r\n        let actionName = `[${this.$moduleId}]:${key}`;\r\n        actions[key] = (...args) => {\r\n            console.log('do', actionName, ...args);\r\n            this::act(actionName, ...args);\r\n        };\r\n    });\r\n    return actions;\r\n}\r\nlet ids = {};\r\nlet wm = new WeakMap();\r\nfunction getId() {\r\n    let key = this.constructor.name;\r\n    ids[key] = ids[key] || 0;\r\n    return `${key}/${ids[key]++}`;\r\n}\r\nexport default class ModelObject {\r\n    constructor(\r\n        store,\r\n        data,\r\n        template,\r\n        module = { }\r\n    ) {\r\n        if (!store) {\r\n            throw 'You must register the store before creating model objects.';\r\n        }\r\n        let id = this::getId();\r\n        wm.set(this, {\r\n            $moduleId: id,\r\n            $store: store\r\n        });\r\n        data::validate(template);\r\n        this::apply(data, template);\r\n        this.actions = {\r\n            ...this::visitUserActions(template),\r\n            ...this::visitCustomActions(module)\r\n        };\r\n        let proxy = Wrapper.getProxy(this);\r\n        this::moduleFn(template, module);\r\n        return proxy;\r\n    }\r\n    get $moduleId() {\r\n        return wm.get(this).$moduleId;\r\n    }\r\n    get $store() {\r\n        return wm.get(this).$store;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ModelObject/index.js","\r\nimport _ from 'lodash';\r\nlet wm = new WeakMap();\r\nexport default class ProxyWrapper {\r\n    static getProxy(target) {\r\n        let keys = _.keys(target);\r\n        keys.forEach(key => {\r\n            if (typeof target[key] === 'object' &&\r\n                !Array.isArray(target[key]) &&\r\n                !wm.get(target[key])\r\n            ) {\r\n                target[key] = ProxyWrapper.getProxy(target[key]);\r\n                wm.set(target[key], true);\r\n            }\r\n        });\r\n        return new Proxy(target, {\r\n            get(t, key) {\r\n                if (typeof key !== 'symbol' && // synthetic toString, etc. functions (possibly related to VueJS)\r\n                    key !== '__ob__' && // protection for VueJS models\r\n                    key !== '_isVue' &&\r\n                    key !== 'toJSON' && // JSON.stringify\r\n                    key !== 'actions' &&\r\n                    key !== '$moduleId' &&\r\n                    key !== '$store' &&\r\n                    key !== 'then' &&\r\n                    keys.indexOf(key) === -1\r\n                ) {\r\n                    throw new Error(`unknown property '${key}'`);\r\n                }\r\n                return t[key];\r\n            }\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ProxyWrapper/index.js","\r\nimport __TYPE from 'enumerations/type';\r\nimport __ModelObject from 'ModelObject';\r\nexport const ModelObject = __ModelObject;\r\nexport const TYPE = __TYPE;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\r\nimport _ from 'lodash';\r\nimport TYPE from 'enumerations/type';\r\nfunction getActions(type) {\r\n    if (type === TYPE.Array) {\r\n        return ['set', 'add', 'remove', 'clear'];\r\n    } else {\r\n        return ['set'];\r\n    }\r\n}\r\nlet prefixes = [];\r\nfunction visitActions(template) {\r\n    let actions = {};\r\n    let properties = Object.getOwnPropertyNames(template);\r\n    _.each(properties, property => {\r\n        _.forOwn(getActions(template[property].type), key => {\r\n            let actionName = `[${this.$moduleId}]/${prefixes.join('/')}${prefixes.length ? '/' : ''}${property}:${key}`;\r\n            actions[actionName] = ({ commit }, value) => {\r\n                console.log('act', actionName, value, this);\r\n                commit(actionName, value);\r\n                _.each(template[property].sideEffects, sideEffect => {\r\n                    let sideEffectName = `[${this.$moduleId}]/${sideEffect.property}:${sideEffect.action}`;\r\n                    console.log('act/side-effect', sideEffectName, sideEffect.value);\r\n                    commit(sideEffectName, sideEffect.value);\r\n                });\r\n            };\r\n        });\r\n        if(template[property].properties) {\r\n            prefixes.push(property);\r\n            _.extend(actions, this::visitActions(template[property].properties));\r\n            prefixes.splice(-1);\r\n        }\r\n    });\r\n    return actions;\r\n}\r\nfunction visitMutations(template) {\r\n    let mutations = {};\r\n    let properties = Object.getOwnPropertyNames(template);\r\n    _.each(properties, property => {\r\n        _.forOwn(getActions(template[property].type), key => {\r\n            let actionName = `[${this.$moduleId}]/${prefixes.join('/')}${prefixes.length ? '/' : ''}${property}:${key}`;\r\n            let chain = _.cloneDeep(prefixes);\r\n            if (key === 'set') {\r\n                mutations[actionName] = (state, value) => {\r\n                    console.log('mutate', actionName, state, value);\r\n                    _.reduce(chain, (t, prop) => t[prop], state)[property] = value;\r\n                };\r\n            } else if (key === 'clear') {\r\n                mutations[actionName] = (state, value) => {\r\n                    console.log('mutate', actionName, state, value);\r\n                    _.reduce(chain, (t, prop) => t[prop], state)[property].splice(0);\r\n                };\r\n            } else if (key === 'add') {\r\n                mutations[actionName] = (state, value) => {\r\n                    console.log('mutate', actionName, state, value);\r\n                    _.reduce(chain, (t, prop) => t[prop], state)[property].push(value);\r\n                };\r\n            } else if (key === 'remove') {\r\n                mutations[actionName] = (state, value) => {\r\n                    console.log('mutate', actionName, state, value);\r\n                    let array = _.reduce(chain, (t, prop) => t[prop], state)[property];\r\n                    // https://vuejs.org/v2/guide/list.html#Caveats\r\n                    let index = array.indexOf(value);\r\n                    if (index !== -1) {\r\n                        array.splice(index, 1);\r\n                    } else {\r\n                        console.log(`item ${value} not found`);\r\n                    }\r\n                };\r\n            }\r\n        });\r\n        if(template[property].properties) {\r\n            prefixes.push(property);\r\n            _.extend(mutations, this::visitMutations(template[property].properties));\r\n            prefixes.splice(-1);\r\n        }\r\n    });\r\n    return mutations;\r\n}\r\nexport default function (template, module) {\r\n    // mapping action to module id\r\n    _.forOwn(module, (value, key) => {\r\n        delete module[key];\r\n        module[`[${this.$moduleId}]:${key}`] = value;\r\n    });\r\n    this.$store.registerModule(this.$moduleId, {\r\n        state: this,\r\n        actions: {\r\n            ...this::visitActions(template),\r\n            ...module\r\n        },\r\n        mutations: {\r\n            ...this::visitMutations(template)\r\n        }\r\n    });\r\n    return module;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ModelObject/module.js","\r\nimport _ from 'lodash';\r\nimport ModelObject from 'ModelObject';\r\nimport TYPE from 'enumerations/type';\r\nlet stack = [];\r\nfunction throwError(type, data) {\r\n    throw new Error(`expected '${type.toString()}' but got '${typeof data}' in '${stack.join('.')}'`);\r\n}\r\nfunction validateProperty(template) {\r\n    if (_.isUndefined(this)) {\r\n        return;\r\n    }\r\n    switch (template.type) {\r\n        case TYPE.Any:\r\n            break;\r\n        case TYPE.Array:\r\n            if (!_.isArray(this)) {\r\n                throwError(template.type, this);\r\n            } else {\r\n                _.each(this, item => {\r\n                    item::validateProperty(template.items);\r\n                });\r\n            }\r\n            break;\r\n        case TYPE.Boolean:\r\n            if (!_.isBoolean(this)) {\r\n                throwError(template.type, this);\r\n            }\r\n            break;\r\n        case TYPE.Complex:\r\n            if (!_.isObject(this)) {\r\n                throwError(template.type, this);\r\n            }\r\n            this::validate(template.properties)\r\n            break;\r\n        case TYPE.ModelObject:\r\n            if (this && !(this instanceof ModelObject)) {\r\n                throwError(template.type, this);\r\n            }\r\n            break;\r\n        case TYPE.Number:\r\n            if (!_.isNumber(this)) {\r\n                throwError(template.type, this);\r\n            }\r\n            break;\r\n        case TYPE.Object:\r\n            if (!_.isObject(this)) {\r\n                throwError(template.type, this);\r\n            }\r\n            break;\r\n        case TYPE.String:\r\n            if (!_.isString(this)) {\r\n                throwError(template.type, this);\r\n            }\r\n            break;\r\n        default:\r\n            throw new Error(`unexpected type`);\r\n    }\r\n}\r\nfunction validate(template) {\r\n    let unexpectedProperties = _.difference(\r\n        _.keys(this),\r\n        _.keys(template)\r\n    );\r\n    if (unexpectedProperties.length) {\r\n        throw new Error(`unexpected properties found in '${stack.join('.') || 'data'}': '${unexpectedProperties}'`);\r\n    }\r\n    let expectedProperties = _.intersection(\r\n        _.keys(this),\r\n        _.keys(template)\r\n    );\r\n    _.each(expectedProperties, expectedProperty => {\r\n        stack.push(expectedProperty);\r\n        this[expectedProperty]::validateProperty(template[expectedProperty]);\r\n        stack.splice(-1);\r\n    });\r\n}\r\nexport default function(template) {\r\n    if (!this) {\r\n        return;\r\n    }\r\n    stack = [];\r\n    this::validate(template);\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/ModelObject/validate.js","\r\nimport Vue from 'vue';\r\nimport { mapActions, mapMutations } from 'vuex';\r\nexport function mutate(name, ...args) {\r\n    mapMutations([name])[name].call(this, args);\r\n}\r\nexport function act(name, ...args) {\r\n    if(args.length === 1) {\r\n        return mapActions([name])[name].call(this, args.pop());\r\n    } else {\r\n        return mapActions([name])[name].call(this, args);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/vuex/mixin.js","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vue\"\n// module id = 8\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vuex\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}