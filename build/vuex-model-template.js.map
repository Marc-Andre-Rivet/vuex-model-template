{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///vuex-model-template.js","webpack:///webpack/bootstrap bf57509bd7aa8da69c50","webpack:///./src/enumerations/type.js","webpack:///external \"lodash\"","webpack:///./src/ModelObject/index.js","webpack:///./src/ProxyWrapper/index.js","webpack:///./src/index.js","webpack:///./src/ModelObject/module.js","webpack:///./src/ModelObject/validate.js","webpack:///./src/vuex/mixin.js","webpack:///external \"vue\"","webpack:///external \"vuex\""],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_8__","__WEBPACK_EXTERNAL_MODULE_9__","modules","__webpack_require__","moduleId","installedModules","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","obj","default","_ProxyWrapper","_ProxyWrapper2","getProxy","Any","Symbol","Array","Boolean","Complex","ModelObject","Number","String","_classCallCheck","instance","Constructor","TypeError","apply","data","template","_this","_lodash2","intersection","keys","defaults","defaultProperties","difference","each","type","_type2","cloneDeep","defaultValue","_context","console","log","undefined","properties","getActions","visitUserActions","_this2","actions","getOwnPropertyNames","forOwn","key","actionName","$moduleId","prefixes","join","length","_console","_len","arguments","args","_key","concat","_mixin","act","push","extend","splice","visitCustomActions","customModule","_this3","_console2","_len2","_key2","getId","constructor","ids","_extends","assign","target","source","_createClass","defineProperties","props","descriptor","writable","protoProps","staticProps","_lodash","_module","_module2","_validate","_validate2","_type","wm","WeakMap","store","id","set","$store","proxy","ProxyWrapper","TYPE","_ModelObject","_ModelObject2","visitActions","_ref","commit","sideEffects","sideEffect","sideEffectName","action","visitMutations","mutations","chain","state","reduce","t","prop","array","index","indexOf","registerModule","throwError","Error","toString","_typeof","stack","validateProperty","isUndefined","isArray","item","items","isBoolean","isObject","validate","isNumber","isString","unexpectedProperties","expectedProperties","expectedProperty","iterator","mutate","_vuex","mapMutations","mapActions","pop","_vue"],"mappings":"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","file":"vuex-model-template.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"vue\"), require(\"vuex\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"vue\", \"vuex\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"lodash\"), require(\"vue\"), require(\"vuex\")) : factory(root[\"lodash\"], root[\"vue\"], root[\"vuex\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"vue\"), require(\"vuex\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"vue\", \"vuex\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"lodash\"), require(\"vue\"), require(\"vuex\")) : factory(root[\"lodash\"], root[\"vue\"], root[\"vuex\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 10);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _ProxyWrapper = __webpack_require__(3);\n\nvar _ProxyWrapper2 = _interopRequireDefault(_ProxyWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _ProxyWrapper2.default.getProxy({\n    Any: Symbol('Any'),\n    Array: Symbol('Array'),\n    Boolean: Symbol('Boolean'),\n    Complex: Symbol('Complex'),\n    ModelObject: Symbol('ModelObject'),\n    Number: Symbol('Number'),\n    Object: Symbol('Object'),\n    String: Symbol('String'),\n    Symbol: Symbol('Symbol')\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(1);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _mixin = __webpack_require__(7);\n\nvar _module = __webpack_require__(5);\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _validate = __webpack_require__(6);\n\nvar _validate2 = _interopRequireDefault(_validate);\n\nvar _ProxyWrapper = __webpack_require__(3);\n\nvar _ProxyWrapper2 = _interopRequireDefault(_ProxyWrapper);\n\nvar _type = __webpack_require__(0);\n\nvar _type2 = _interopRequireDefault(_type);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction apply(data, template) {\n    var _this = this;\n\n    var expectedProperties = _lodash2.default.intersection(_lodash2.default.keys(data), _lodash2.default.keys(template));\n    _lodash2.default.defaults(this, data);\n    var defaultProperties = _lodash2.default.difference(_lodash2.default.keys(template), _lodash2.default.keys(data));\n    _lodash2.default.each(defaultProperties, function (property) {\n        if (template[property].type !== _type2.default.Complex) {\n            _this[property] = _lodash2.default.cloneDeep(template[property].defaultValue);\n        } else {\n            var _context;\n\n            console.log('apply default value to complex type', property);\n            _this[property] = {};\n            (_context = _this[property], apply).call(_context, data && data[property] ? data[property] : undefined, template[property].properties);\n        }\n    });\n}\nfunction getActions(type) {\n    if (type === _type2.default.Array) {\n        return ['set', 'add', 'remove', 'clear'];\n    } else {\n        return ['set'];\n    }\n}\nvar prefixes = [];\nfunction visitUserActions(template) {\n    var _this2 = this;\n\n    var actions = {};\n    var properties = Object.getOwnPropertyNames(template);\n    _lodash2.default.each(properties, function (property) {\n        actions[property] = {};\n        var propertyActions = template[property].actions;\n        _lodash2.default.forOwn(getActions(template[property].type), function (key) {\n            var actionName = '[' + _this2.$moduleId + ']/' + prefixes.join('/') + (prefixes.length ? '/' : '') + property + ':' + key;\n            actions[property][key] = function () {\n                var _console;\n\n                for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = arguments[_key];\n                }\n\n                (_console = console).log.apply(_console, ['do', actionName].concat(args));\n                _mixin.act.call.apply(_mixin.act, [_this2, actionName].concat(args));\n            };\n        });\n        if (template[property].properties) {\n            prefixes.push(property);\n            actions[property] = _lodash2.default.extend(actions[property], visitUserActions.call(_this2, template[property].properties));\n            prefixes.splice(-1);\n        }\n    });\n    return actions;\n}\nfunction visitCustomActions(customModule) {\n    var _this3 = this;\n\n    var actions = {};\n    _lodash2.default.forOwn(customModule, function (value, key) {\n        var actionName = '[' + _this3.$moduleId + ']:' + key;\n        actions[key] = function () {\n            var _console2;\n\n            for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                args[_key2] = arguments[_key2];\n            }\n\n            (_console2 = console).log.apply(_console2, ['do', actionName].concat(args));\n            _mixin.act.call.apply(_mixin.act, [_this3, actionName].concat(args));\n        };\n    });\n    return actions;\n}\nvar ids = {};\nvar wm = new WeakMap();\nfunction getId() {\n    var key = this.constructor.name;\n    ids[key] = ids[key] || 0;\n    return key + '/' + ids[key]++;\n}\n\nvar ModelObject = function () {\n    function ModelObject(store, data, template) {\n        var module = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n        _classCallCheck(this, ModelObject);\n\n        if (!store) {\n            throw 'You must register the store before creating model objects.';\n        }\n        var id = getId.call(this);\n        wm.set(this, {\n            $moduleId: id,\n            $store: store\n        });\n        _validate2.default.call(data, template);\n        apply.call(this, data, template);\n        this.actions = _extends({}, visitUserActions.call(this, template), visitCustomActions.call(this, module));\n        var proxy = _ProxyWrapper2.default.getProxy(this);\n        _module2.default.call(this, template, module);\n        return proxy;\n    }\n\n    _createClass(ModelObject, [{\n        key: '$moduleId',\n        get: function get() {\n            return wm.get(this).$moduleId;\n        }\n    }, {\n        key: '$store',\n        get: function get() {\n            return wm.get(this).$store;\n        }\n    }]);\n\n    return ModelObject;\n}();\n\nexports.default = ModelObject;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(1);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar wm = new WeakMap();\n\nvar ProxyWrapper = function () {\n    function ProxyWrapper() {\n        _classCallCheck(this, ProxyWrapper);\n    }\n\n    _createClass(ProxyWrapper, null, [{\n        key: 'getProxy',\n        value: function getProxy(target) {\n            return target;\n        }\n    }]);\n\n    return ProxyWrapper;\n}();\n\nexports.default = ProxyWrapper;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TYPE = exports.ModelObject = undefined;\n\nvar _type = __webpack_require__(0);\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _ModelObject = __webpack_require__(2);\n\nvar _ModelObject2 = _interopRequireDefault(_ModelObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ModelObject = exports.ModelObject = _ModelObject2.default;\nvar TYPE = exports.TYPE = _type2.default;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = function (template, module) {\n    var _this3 = this;\n\n    // mapping action to module id\n    _lodash2.default.forOwn(module, function (value, key) {\n        delete module[key];\n        module['[' + _this3.$moduleId + ']:' + key] = value;\n    });\n    this.$store.registerModule(this.$moduleId, {\n        state: this,\n        actions: _extends({}, visitActions.call(this, template), module),\n        mutations: _extends({}, visitMutations.call(this, template))\n    });\n    return module;\n};\n\nvar _lodash = __webpack_require__(1);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _type = __webpack_require__(0);\n\nvar _type2 = _interopRequireDefault(_type);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getActions(type) {\n    if (type === _type2.default.Array) {\n        return ['set', 'add', 'remove', 'clear'];\n    } else {\n        return ['set'];\n    }\n}\nvar prefixes = [];\nfunction visitActions(template) {\n    var _this = this;\n\n    var actions = {};\n    var properties = Object.getOwnPropertyNames(template);\n    _lodash2.default.each(properties, function (property) {\n        _lodash2.default.forOwn(getActions(template[property].type), function (key) {\n            var actionName = '[' + _this.$moduleId + ']/' + prefixes.join('/') + (prefixes.length ? '/' : '') + property + ':' + key;\n            actions[actionName] = function (_ref, value) {\n                var commit = _ref.commit;\n\n                console.log('act', actionName, value, _this);\n                commit(actionName, value);\n                _lodash2.default.each(template[property].sideEffects, function (sideEffect) {\n                    var sideEffectName = '[' + _this.$moduleId + ']/' + sideEffect.property + ':' + sideEffect.action;\n                    console.log('act/side-effect', sideEffectName, sideEffect.value);\n                    commit(sideEffectName, sideEffect.value);\n                });\n            };\n        });\n        if (template[property].properties) {\n            prefixes.push(property);\n            _lodash2.default.extend(actions, visitActions.call(_this, template[property].properties));\n            prefixes.splice(-1);\n        }\n    });\n    return actions;\n}\nfunction visitMutations(template) {\n    var _this2 = this;\n\n    var mutations = {};\n    var properties = Object.getOwnPropertyNames(template);\n    _lodash2.default.each(properties, function (property) {\n        _lodash2.default.forOwn(getActions(template[property].type), function (key) {\n            var actionName = '[' + _this2.$moduleId + ']/' + prefixes.join('/') + (prefixes.length ? '/' : '') + property + ':' + key;\n            var chain = _lodash2.default.cloneDeep(prefixes);\n            if (key === 'set') {\n                mutations[actionName] = function (state, value) {\n                    console.log('mutate', actionName, state, value);\n                    _lodash2.default.reduce(chain, function (t, prop) {\n                        return t[prop];\n                    }, state)[property] = value;\n                };\n            } else if (key === 'clear') {\n                mutations[actionName] = function (state, value) {\n                    console.log('mutate', actionName, state, value);\n                    _lodash2.default.reduce(chain, function (t, prop) {\n                        return t[prop];\n                    }, state)[property].splice(0);\n                };\n            } else if (key === 'add') {\n                mutations[actionName] = function (state, value) {\n                    console.log('mutate', actionName, state, value);\n                    _lodash2.default.reduce(chain, function (t, prop) {\n                        return t[prop];\n                    }, state)[property].push(value);\n                };\n            } else if (key === 'remove') {\n                mutations[actionName] = function (state, value) {\n                    console.log('mutate', actionName, state, value);\n                    var array = _lodash2.default.reduce(chain, function (t, prop) {\n                        return t[prop];\n                    }, state)[property];\n                    // https://vuejs.org/v2/guide/list.html#Caveats\n                    var index = array.indexOf(value);\n                    if (index !== -1) {\n                        array.splice(index, 1);\n                    } else {\n                        console.log('item ' + value + ' not found');\n                    }\n                };\n            }\n        });\n        if (template[property].properties) {\n            prefixes.push(property);\n            _lodash2.default.extend(mutations, visitMutations.call(_this2, template[property].properties));\n            prefixes.splice(-1);\n        }\n    });\n    return mutations;\n}\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = function (template) {\n    if (!this) {\n        return;\n    }\n    stack = [];\n    validate.call(this, template);\n};\n\nvar _lodash = __webpack_require__(1);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _ModelObject = __webpack_require__(2);\n\nvar _ModelObject2 = _interopRequireDefault(_ModelObject);\n\nvar _type = __webpack_require__(0);\n\nvar _type2 = _interopRequireDefault(_type);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar stack = [];\nfunction throwError(type, data) {\n    throw new Error('expected \\'' + type.toString() + '\\' but got \\'' + (typeof data === 'undefined' ? 'undefined' : _typeof(data)) + '\\' in \\'' + stack.join('.') + '\\'');\n}\nfunction validateProperty(template) {\n    if (_lodash2.default.isUndefined(this)) {\n        return;\n    }\n    switch (template.type) {\n        case _type2.default.Any:\n            break;\n        case _type2.default.Array:\n            if (!_lodash2.default.isArray(this)) {\n                throwError(template.type, this);\n            } else {\n                _lodash2.default.each(this, function (item) {\n                    validateProperty.call(item, template.items);\n                });\n            }\n            break;\n        case _type2.default.Boolean:\n            if (!_lodash2.default.isBoolean(this)) {\n                throwError(template.type, this);\n            }\n            break;\n        case _type2.default.Complex:\n            if (!_lodash2.default.isObject(this)) {\n                throwError(template.type, this);\n            }\n            validate.call(this, template.properties);\n            break;\n        case _type2.default.ModelObject:\n            if (this && !(this instanceof _ModelObject2.default)) {\n                throwError(template.type, this);\n            }\n            break;\n        case _type2.default.Number:\n            if (!_lodash2.default.isNumber(this)) {\n                throwError(template.type, this);\n            }\n            break;\n        case _type2.default.Object:\n            if (!_lodash2.default.isObject(this)) {\n                throwError(template.type, this);\n            }\n            break;\n        case _type2.default.String:\n            if (!_lodash2.default.isString(this)) {\n                throwError(template.type, this);\n            }\n            break;\n        default:\n            throw new Error('unexpected type');\n    }\n}\nfunction validate(template) {\n    var _this = this;\n\n    var unexpectedProperties = _lodash2.default.difference(_lodash2.default.keys(this), _lodash2.default.keys(template));\n    if (unexpectedProperties.length) {\n        throw new Error('unexpected properties found in \\'' + (stack.join('.') || 'data') + '\\': \\'' + unexpectedProperties + '\\'');\n    }\n    var expectedProperties = _lodash2.default.intersection(_lodash2.default.keys(this), _lodash2.default.keys(template));\n    _lodash2.default.each(expectedProperties, function (expectedProperty) {\n        var _context;\n\n        stack.push(expectedProperty);\n        (_context = _this[expectedProperty], validateProperty).call(_context, template[expectedProperty]);\n        stack.splice(-1);\n    });\n}\n;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.mutate = mutate;\nexports.act = act;\n\nvar _vue = __webpack_require__(8);\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _vuex = __webpack_require__(9);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction mutate(name) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    (0, _vuex.mapMutations)([name])[name].call(this, args);\n}\nfunction act(name) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n    }\n\n    if (args.length === 1) {\n        return (0, _vuex.mapActions)([name])[name].call(this, args.pop());\n    } else {\n        return (0, _vuex.mapActions)([name])[name].call(this, args);\n    }\n}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(4);\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// vuex-model-template.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bf57509bd7aa8da69c50","\r\nimport Wrapper from 'ProxyWrapper';\r\nexport default Wrapper.getProxy({\r\n    Any: Symbol('Any'),\r\n    Array: Symbol('Array'),\r\n    Boolean: Symbol('Boolean'),\r\n    Complex: Symbol('Complex'),\r\n    ModelObject: Symbol('ModelObject'),\r\n    Number: Symbol('Number'),\r\n    Object: Symbol('Object'),\r\n    String: Symbol('String'),\r\n    Symbol: Symbol('Symbol')\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/enumerations/type.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 1\n// module chunks = 0","\r\nimport _ from 'lodash';\r\nimport { act } from 'vuex/mixin';\r\nimport moduleFn from 'ModelObject/module';\r\nimport validate from 'ModelObject/validate';\r\nimport Wrapper from 'ProxyWrapper';\r\nimport TYPE from 'enumerations/type';\r\nfunction apply(data, template) {\r\n    let expectedProperties = _.intersection(\r\n        _.keys(data),\r\n        _.keys(template)\r\n    );\r\n    _.defaults(this, data);\r\n    let defaultProperties = _.difference(\r\n        _.keys(template),\r\n        _.keys(data)\r\n    );\r\n    _.each(defaultProperties, property => {\r\n        if (template[property].type !== TYPE.Complex) {\r\n            this[property] = _.cloneDeep(template[property].defaultValue);\r\n        } else {\r\n            console.log('apply default value to complex type', property);\r\n            this[property] = {};\r\n            this[property]::apply(data && data[property] ? data[property] : undefined, template[property].properties);\r\n        }\r\n    });\r\n}\r\nfunction getActions(type) {\r\n    if (type === TYPE.Array) {\r\n        return ['set', 'add', 'remove', 'clear'];\r\n    } else {\r\n        return ['set'];\r\n    }\r\n}\r\nlet prefixes = [];\r\nfunction visitUserActions(template) {\r\n    let actions = {};\r\n    let properties = Object.getOwnPropertyNames(template);\r\n    _.each(properties, property => {\r\n        actions[property] = {};\r\n        let propertyActions = template[property].actions;\r\n        _.forOwn(getActions(template[property].type), key => {\r\n            let actionName = `[${this.$moduleId}]/${prefixes.join('/')}${prefixes.length ? '/' : ''}${property}:${key}`;\r\n            actions[property][key] = (...args) => {\r\n                console.log('do', actionName, ...args);\r\n                this::act(actionName, ...args);\r\n            };\r\n        });\r\n        if (template[property].properties) {\r\n            prefixes.push(property);\r\n            actions[property] = _.extend(actions[property], this::visitUserActions(template[property].properties));\r\n            prefixes.splice(-1);\r\n        }\r\n    });\r\n    return actions;\r\n}\r\nfunction visitCustomActions(customModule) {\r\n    let actions = {};\r\n    _.forOwn(customModule, (value, key) => {\r\n        let actionName = `[${this.$moduleId}]:${key}`;\r\n        actions[key] = (...args) => {\r\n            console.log('do', actionName, ...args);\r\n            this::act(actionName, ...args);\r\n        };\r\n    });\r\n    return actions;\r\n}\r\nlet ids = {};\r\nlet wm = new WeakMap();\r\nfunction getId() {\r\n    let key = this.constructor.name;\r\n    ids[key] = ids[key] || 0;\r\n    return `${key}/${ids[key]++}`;\r\n}\r\nexport default class ModelObject {\r\n    constructor(\r\n        store,\r\n        data,\r\n        template,\r\n        module = { }\r\n    ) {\r\n        if (!store) {\r\n            throw 'You must register the store before creating model objects.';\r\n        }\r\n        let id = this::getId();\r\n        wm.set(this, {\r\n            $moduleId: id,\r\n            $store: store\r\n        });\r\n        data::validate(template);\r\n        this::apply(data, template);\r\n        this.actions = {\r\n            ...this::visitUserActions(template),\r\n            ...this::visitCustomActions(module)\r\n        };\r\n        let proxy = Wrapper.getProxy(this);\r\n        this::moduleFn(template, module);\r\n        return proxy;\r\n    }\r\n    get $moduleId() {\r\n        return wm.get(this).$moduleId;\r\n    }\r\n    get $store() {\r\n        return wm.get(this).$store;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ModelObject/index.js","\r\nimport _ from 'lodash';\r\nlet wm = new WeakMap();\r\nexport default class ProxyWrapper {\r\n    static getProxy(target) {\r\n        return target;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ProxyWrapper/index.js","\r\nimport __TYPE from 'enumerations/type';\r\nimport __ModelObject from 'ModelObject';\r\nexport const ModelObject = __ModelObject;\r\nexport const TYPE = __TYPE;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\r\nimport _ from 'lodash';\r\nimport TYPE from 'enumerations/type';\r\nfunction getActions(type) {\r\n    if (type === TYPE.Array) {\r\n        return ['set', 'add', 'remove', 'clear'];\r\n    } else {\r\n        return ['set'];\r\n    }\r\n}\r\nlet prefixes = [];\r\nfunction visitActions(template) {\r\n    let actions = {};\r\n    let properties = Object.getOwnPropertyNames(template);\r\n    _.each(properties, property => {\r\n        _.forOwn(getActions(template[property].type), key => {\r\n            let actionName = `[${this.$moduleId}]/${prefixes.join('/')}${prefixes.length ? '/' : ''}${property}:${key}`;\r\n            actions[actionName] = ({ commit }, value) => {\r\n                console.log('act', actionName, value, this);\r\n                commit(actionName, value);\r\n                _.each(template[property].sideEffects, sideEffect => {\r\n                    let sideEffectName = `[${this.$moduleId}]/${sideEffect.property}:${sideEffect.action}`;\r\n                    console.log('act/side-effect', sideEffectName, sideEffect.value);\r\n                    commit(sideEffectName, sideEffect.value);\r\n                });\r\n            };\r\n        });\r\n        if(template[property].properties) {\r\n            prefixes.push(property);\r\n            _.extend(actions, this::visitActions(template[property].properties));\r\n            prefixes.splice(-1);\r\n        }\r\n    });\r\n    return actions;\r\n}\r\nfunction visitMutations(template) {\r\n    let mutations = {};\r\n    let properties = Object.getOwnPropertyNames(template);\r\n    _.each(properties, property => {\r\n        _.forOwn(getActions(template[property].type), key => {\r\n            let actionName = `[${this.$moduleId}]/${prefixes.join('/')}${prefixes.length ? '/' : ''}${property}:${key}`;\r\n            let chain = _.cloneDeep(prefixes);\r\n            if (key === 'set') {\r\n                mutations[actionName] = (state, value) => {\r\n                    console.log('mutate', actionName, state, value);\r\n                    _.reduce(chain, (t, prop) => t[prop], state)[property] = value;\r\n                };\r\n            } else if (key === 'clear') {\r\n                mutations[actionName] = (state, value) => {\r\n                    console.log('mutate', actionName, state, value);\r\n                    _.reduce(chain, (t, prop) => t[prop], state)[property].splice(0);\r\n                };\r\n            } else if (key === 'add') {\r\n                mutations[actionName] = (state, value) => {\r\n                    console.log('mutate', actionName, state, value);\r\n                    _.reduce(chain, (t, prop) => t[prop], state)[property].push(value);\r\n                };\r\n            } else if (key === 'remove') {\r\n                mutations[actionName] = (state, value) => {\r\n                    console.log('mutate', actionName, state, value);\r\n                    let array = _.reduce(chain, (t, prop) => t[prop], state)[property];\r\n                    // https://vuejs.org/v2/guide/list.html#Caveats\r\n                    let index = array.indexOf(value);\r\n                    if (index !== -1) {\r\n                        array.splice(index, 1);\r\n                    } else {\r\n                        console.log(`item ${value} not found`);\r\n                    }\r\n                };\r\n            }\r\n        });\r\n        if(template[property].properties) {\r\n            prefixes.push(property);\r\n            _.extend(mutations, this::visitMutations(template[property].properties));\r\n            prefixes.splice(-1);\r\n        }\r\n    });\r\n    return mutations;\r\n}\r\nexport default function (template, module) {\r\n    // mapping action to module id\r\n    _.forOwn(module, (value, key) => {\r\n        delete module[key];\r\n        module[`[${this.$moduleId}]:${key}`] = value;\r\n    });\r\n    this.$store.registerModule(this.$moduleId, {\r\n        state: this,\r\n        actions: {\r\n            ...this::visitActions(template),\r\n            ...module\r\n        },\r\n        mutations: {\r\n            ...this::visitMutations(template)\r\n        }\r\n    });\r\n    return module;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ModelObject/module.js","\r\nimport _ from 'lodash';\r\nimport ModelObject from 'ModelObject';\r\nimport TYPE from 'enumerations/type';\r\nlet stack = [];\r\nfunction throwError(type, data) {\r\n    throw new Error(`expected '${type.toString()}' but got '${typeof data}' in '${stack.join('.')}'`);\r\n}\r\nfunction validateProperty(template) {\r\n    if (_.isUndefined(this)) {\r\n        return;\r\n    }\r\n    switch (template.type) {\r\n        case TYPE.Any:\r\n            break;\r\n        case TYPE.Array:\r\n            if (!_.isArray(this)) {\r\n                throwError(template.type, this);\r\n            } else {\r\n                _.each(this, item => {\r\n                    item::validateProperty(template.items);\r\n                });\r\n            }\r\n            break;\r\n        case TYPE.Boolean:\r\n            if (!_.isBoolean(this)) {\r\n                throwError(template.type, this);\r\n            }\r\n            break;\r\n        case TYPE.Complex:\r\n            if (!_.isObject(this)) {\r\n                throwError(template.type, this);\r\n            }\r\n            this::validate(template.properties)\r\n            break;\r\n        case TYPE.ModelObject:\r\n            if (this && !(this instanceof ModelObject)) {\r\n                throwError(template.type, this);\r\n            }\r\n            break;\r\n        case TYPE.Number:\r\n            if (!_.isNumber(this)) {\r\n                throwError(template.type, this);\r\n            }\r\n            break;\r\n        case TYPE.Object:\r\n            if (!_.isObject(this)) {\r\n                throwError(template.type, this);\r\n            }\r\n            break;\r\n        case TYPE.String:\r\n            if (!_.isString(this)) {\r\n                throwError(template.type, this);\r\n            }\r\n            break;\r\n        default:\r\n            throw new Error(`unexpected type`);\r\n    }\r\n}\r\nfunction validate(template) {\r\n    let unexpectedProperties = _.difference(\r\n        _.keys(this),\r\n        _.keys(template)\r\n    );\r\n    if (unexpectedProperties.length) {\r\n        throw new Error(`unexpected properties found in '${stack.join('.') || 'data'}': '${unexpectedProperties}'`);\r\n    }\r\n    let expectedProperties = _.intersection(\r\n        _.keys(this),\r\n        _.keys(template)\r\n    );\r\n    _.each(expectedProperties, expectedProperty => {\r\n        stack.push(expectedProperty);\r\n        this[expectedProperty]::validateProperty(template[expectedProperty]);\r\n        stack.splice(-1);\r\n    });\r\n}\r\nexport default function(template) {\r\n    if (!this) {\r\n        return;\r\n    }\r\n    stack = [];\r\n    this::validate(template);\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/ModelObject/validate.js","\r\nimport Vue from 'vue';\r\nimport { mapActions, mapMutations } from 'vuex';\r\nexport function mutate(name, ...args) {\r\n    mapMutations([name])[name].call(this, args);\r\n}\r\nexport function act(name, ...args) {\r\n    if(args.length === 1) {\r\n        return mapActions([name])[name].call(this, args.pop());\r\n    } else {\r\n        return mapActions([name])[name].call(this, args);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/vuex/mixin.js","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vue\"\n// module id = 8\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vuex\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}